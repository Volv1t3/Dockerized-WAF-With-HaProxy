<VirtualHost *:8080>
    ServerName agricommerce.evolvlabs.com

    ProxyPreserveHost On

    # API requests go to backend
    ProxyPassMatch ^/api/(.*)$ http://backend:33771/api/$1
    ProxyPassReverse ^/api/(.*)$ http://backend:33771/api/$1

    # Everything else goes to frontend
    ProxyPass        / http://frontend:34771/
    ProxyPassReverse / http://frontend:34771/


    ErrorLog /var/log/apache2/error.log
    CustomLog /var/log/apache2/access.log combined
</VirtualHost>